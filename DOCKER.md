# Docker Architecture - Max Photo Gallery

## ğŸ“ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½ÑƒÑ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ½Ğ° Ğ±Ğ°Ğ·Ğµ Docker Ñ Ñ‚Ñ€ĞµĞ¼Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Host Machine                        â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Docker Network: max_gallery_network        â”‚  â”‚
â”‚  â”‚                                                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   Frontend    â”‚    â”‚    Backend    â”‚    â”‚Database â”‚ â”‚  â”‚
â”‚  â”‚  â”‚    (nginx)    â”‚â”€â”€â”€â–¶â”‚   (FastAPI)   â”‚â”€â”€â”€â–¶â”‚  (PG)   â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   Port: 80    â”‚    â”‚  Port: 8000   â”‚    â”‚Port:5432â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚         â”‚                      â”‚                 â”‚       â”‚  â”‚
â”‚  â”‚         â–¼                      â–¼                 â–¼       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚  â”‚(volumes)  â”‚         â”‚(volumes)  â”‚    â”‚(volumes)â”‚    â”‚  â”‚
â”‚  â”‚  â”‚  static   â”‚         â”‚  uploads  â”‚    â”‚  pgdata â”‚    â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ³ Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹

### 1. Frontend (Nginx + React)

**ĞĞ±Ñ€Ğ°Ğ·:** Ğ¡Ğ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ (multi-stage build)
- Stage 1: Node.js 20 Alpine - ÑĞ±Ğ¾Ñ€ĞºĞ° React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
- Stage 2: Nginx Alpine - production ÑĞµÑ€Ğ²ĞµÑ€

**ĞŸĞ¾Ñ€Ñ‚Ñ‹:** 80:80

**Volumes:** ĞĞµÑ‚ (ÑÑ‚Ğ°Ñ‚Ğ¸ĞºĞ° Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ° Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ·)

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:** Backend

**Healthcheck:** wget Ğ½Ğ° http://localhost:80

---

### 2. Backend (FastAPI)

**ĞĞ±Ñ€Ğ°Ğ·:** Ğ¡Ğ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ (Python 3.11-slim)

**ĞŸĞ¾Ñ€Ñ‚Ñ‹:** 8000:8000

**Volumes:**
- `uploads_data:/app/uploads` - Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹
- `./backend/error.log:/app/error.log` - Ğ»Ğ¾Ğ³Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

**Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸:** Database (Ñ healthcheck)

**Healthcheck:** curl Ğ½Ğ° http://localhost:8000/health

**ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ:**
- DATABASE_URL - Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº PostgreSQL
- SECRET_KEY, REFRESH_SECRET_KEY - JWT ĞºĞ»ÑÑ‡Ğ¸
- BOT_TOKEN - Ñ‚Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ° Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€Ğ°
- CORS_ORIGINS - Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ñ‹

---

### 3. Database (PostgreSQL 16)

**ĞĞ±Ñ€Ğ°Ğ·:** postgres:16-alpine

**ĞŸĞ¾Ñ€Ñ‚Ñ‹:** 5432:5432

**Volumes:**
- `postgres_data:/var/lib/postgresql/data` - Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ‘Ğ”
- `./backend/database.sql:/docker-entrypoint-initdb.d/01-schema.sql` - Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑÑ…ĞµĞ¼Ñ‹

**Healthcheck:** pg_isready

**ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ:**
- POSTGRES_DB - Ğ¸Ğ¼Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- POSTGRES_USER - Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
- POSTGRES_PASSWORD - Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ

---

## ğŸ“¦ Docker Volumes

### ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğµ volumes (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ¿Ñ€Ğ¸ `docker-compose down`):

| Volume | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Ğ Ğ°Ğ·Ğ¼ĞµÑ€ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ¾) |
|--------|-----------|------------------|
| `max_gallery_postgres_data` | Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ PostgreSQL | 100MB - 10GB+ |
| `max_gallery_uploads` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ | 1GB - 100GB+ |

### ĞœĞ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸:

| ĞŸÑƒÑ‚ÑŒ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ | Ğ ĞµĞ¶Ğ¸Ğ¼ |
|------|-----------|-------|
| `./backend/database.sql` | SQL ÑÑ…ĞµĞ¼Ğ° Ğ´Ğ»Ñ init | read-only |
| `./backend/error.log` | Ğ›Ğ¾Ğ³Ğ¸ backend | read-write |

---

## ğŸŒ Docker Network

**ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ:** `max_gallery_network`

**Ğ”Ñ€Ğ°Ğ¹Ğ²ĞµÑ€:** bridge

**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ˜Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑĞµÑ‚ÑŒ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

**Ğ’Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğµ Ğ¸Ğ¼ĞµĞ½Ğ° Ñ…Ğ¾ÑÑ‚Ğ¾Ğ²:**
- `db` - PostgreSQL ÑĞµÑ€Ğ²ĞµÑ€
- `backend` - FastAPI ÑĞµÑ€Ğ²ĞµÑ€
- `frontend` - Nginx ÑĞµÑ€Ğ²ĞµÑ€

---

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»

### Ğ—Ğ°Ğ¿ÑƒÑĞº

```
1. Docker Compose Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ docker-compose.yml
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ ÑĞµÑ‚ÑŒ max_gallery_network
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ volumes (ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‚)
4. Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ db
5. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ healthcheck Ğ´Ğ»Ñ db
6. ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ healthcheck Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ backend
7. Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ healthcheck Ğ´Ğ»Ñ backend
8. ĞŸĞ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ healthcheck Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ÑÑ frontend
```

### ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```
1. docker-compose stop Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ SIGTERM Ğ²ÑĞµĞ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ°Ğ¼
2. ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ°ÑÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ
3. Volumes Ğ¸ ÑĞµÑ‚ÑŒ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ
```

### Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ

```
1. docker-compose down Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¸ ÑƒĞ´Ğ°Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹
2. Ğ£Ğ´Ğ°Ğ»ÑĞµÑ‚ÑÑ ÑĞµÑ‚ÑŒ
3. Volumes ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ (ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½ Ñ„Ğ»Ğ°Ğ³ -v)
```

---

## ğŸ”§ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹

### docker-compose.yml
ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„Ğ°Ğ¹Ğ» Ğ´Ğ»Ñ production Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° ÑĞ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¼Ğ¸ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸:
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ production-ready Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
- ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ volumes (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)

### docker-compose.dev.yml
Ğ¤Ğ°Ğ¹Ğ» Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸:
- ĞœĞ¾Ğ½Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ ĞºĞ°Ğº volumes
- Ğ’ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ hot-reload Ğ´Ğ»Ñ backend Ğ¸ frontend
- DEBUG Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½
- Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### Dockerfiles

**backend/Dockerfile:**
- Base: python:3.11-slim
- Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° PostgreSQL ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Ğ¸ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
- ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ° Ğ¸ requirements.txt
- CMD: uvicorn Ñ production Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ°Ğ¼Ğ¸

**front/Dockerfile:**
- Multi-stage build
- Stage 1: Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ñ Node.js
- Stage 2: Nginx Ğ´Ğ»Ñ production serve
- ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°

**front/Dockerfile.dev:**
- ĞŸÑ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¾Ğ±Ñ€Ğ°Ğ· Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
- Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ vite dev server
- Hot-reload Ğ²ĞºĞ»ÑÑ‡ĞµĞ½

---

## ğŸ” Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ¡ĞµÑ‚ĞµĞ²Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ñ
- Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ² Ğ¸Ğ·Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ Docker ÑĞµÑ‚Ğ¸
- Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ° Ğ¸Ğ·Ğ²Ğ½Ğµ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ÑĞµÑ‚Ğ¸)
- Frontend Ğ¸ Backend Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ½Ğ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ñ…

### Secrets Management
- Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ´Ğ°ÑÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
- .env Ñ„Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ·Ñ‹
- Secrets Ğ½Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑÑÑ‚ÑÑ Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ°Ñ… Docker

### Volumes
- ĞŸĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² Docker volumes
- Volumes Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ°Ğ¼Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ñ…Ğ¾ÑÑ‚Ğ°
- Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ volume Ğ´Ğ»Ñ production

---

## ğŸ“Š ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

### Health Checks

Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Ğ¸Ğ¼ĞµÑÑ‚ health checks:

**Database:**
```yaml
test: pg_isready -U app_user -d app_db
interval: 10s
timeout: 5s
retries: 5
```

**Backend:**
```yaml
test: curl -f http://localhost:8000/health
interval: 30s
timeout: 10s
retries: 3
start_period: 40s
```

**Frontend:**
```yaml
test: wget --quiet --tries=1 --spider http://localhost:80
interval: 30s
timeout: 10s
retries: 3
```

### Ğ›Ğ¾Ğ³Ğ¸

ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²:
```bash
# Ğ’ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹
docker-compose logs -f

# ĞšĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ
docker-compose logs -f backend

# Ğ¡ timestamps
docker-compose logs -f --timestamps

# ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ N ÑÑ‚Ñ€Ğ¾Ğº
docker-compose logs --tail=100 backend
```

---

## ğŸš€ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

### Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²

| ĞĞ±Ñ€Ğ°Ğ· | Ğ Ğ°Ğ·Ğ¼ĞµÑ€ | ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ |
|-------|--------|-------------|
| Frontend | ~50MB | Multi-stage build, Alpine Linux |
| Backend | ~200MB | Slim Python, Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ |
| Database | ~250MB | Alpine PostgreSQL |

### ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

- Docker layer caching Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµÑĞ±Ğ¾Ñ€ĞºĞ¸
- npm/pip Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ Ğ´Ğ¾ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ¾Ğ´Ğ°
- Static assets ĞºÑÑˆĞ¸Ñ€ÑƒÑÑ‚ÑÑ Ğ² Nginx

### Production Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Docker Compose secrets** Ğ²Ğ¼ĞµÑÑ‚Ğ¾ .env
2. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ reverse proxy** (Traefik, Nginx) Ğ¿ĞµÑ€ĞµĞ´ frontend
3. **Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ SSL/TLS** Ğ´Ğ»Ñ production
4. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ Ñ€ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ backups** Ğ´Ğ»Ñ volumes
5. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹** (Prometheus, Grafana)
6. **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ** (ELK, Loki)
7. **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²** Ğ´Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ² (memory, CPU)

---

## ğŸ”„ CI/CD Integration

ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ GitHub Actions:

```yaml
name: Build and Deploy

on:
  push:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Build images
        run: docker-compose build
      
      - name: Run tests
        run: docker-compose run backend pytest
      
      - name: Deploy
        run: docker-compose up -d
```

---

## ğŸ“– Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [FastAPI in Containers](https://fastapi.tiangolo.com/deployment/docker/)
- [Best practices for writing Dockerfiles](https://docs.docker.com/develop/develop-images/dockerfile_best-practices/)
